%%
Names={
% 'S028'...
'S033'...
'S034'...
'S037'...
'S040'...
'S041'...
'S042'...
'S043'...
'S044'...
'S047'...
'S048'...% 'S049'...
'S056'...
'S058'...
'S059'...
'S060'...%'S062'...
'S064'...
'S065'...
'S068'...
'S069'...
'S070'...
'S072'...
'S073'...
'S074'...
'S075'...
'S077'...
'S078'...
'S080'...
'S081'...
'S082'...
'S084'...
'S085'...
'S089'...
'S090'...
'S091'...
'S098'...
'S099'...
'S100'...
'S101'...
'S102'...
'S103'...
'S105'...
'S106'...
'S107'...
'S108'... 
};
FApath='G:\Cortical_spinalcord\Tracted_result';
subject_mask='G:\Cortical_spinalcord\subject mask';
for i=1:length(Names)
%     mkdir([subject_mask,'\',Names{i}]);
    FA_p=spm_select('FPlist',FApath,[Names{i},'_FA.nii']);
    FA_v=spm_vol(FA_p);
    FA_w=spm_read_vols(FA_v); // 52~54行 仅仅 是借用了FA的维度
    mask_path=['G:\Cortical_spinalcord\subject mask\',Names{i},'\'];
    mask_p=spm_select('FPlist',mask_path,[Names{i},'_privis.nii']);//mask由meta分析标准库得到，通过配准参数变换到个体上。
    mask_v=spm_vol(mask_p);             
    mask_w=spm_read_vols(mask_v);
    tmp=zeros(size(FA_w));//借用 FA 的维度将mask的值赋值给原维度的数值
    tmp_v=FA_v;
    tmp(:,:,end-size(mask_w,3)+1:end)=mask_w;
    tmp_v.fname=[subject_mask,'\',Names{i},'\',Names{i},'_privis.nii'];
    spm_write_vol(tmp_v,tmp);
end
